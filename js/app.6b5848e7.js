(function(t){function i(i){for(var o,r,a=i[0],h=i[1],l=i[2],c=0,f=[];c<a.length;c++)r=a[c],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&f.push(n[r][0]),n[r]=0;for(o in h)Object.prototype.hasOwnProperty.call(h,o)&&(t[o]=h[o]);p&&p(i);while(f.length)f.shift()();return s.push.apply(s,l||[]),e()}function e(){for(var t,i=0;i<s.length;i++){for(var e=s[i],o=!0,a=1;a<e.length;a++){var h=e[a];0!==n[h]&&(o=!1)}o&&(s.splice(i--,1),t=r(r.s=e[0]))}return t}var o={},n={app:0},s=[];function r(i){if(o[i])return o[i].exports;var e=o[i]={i:i,l:!1,exports:{}};return t[i].call(e.exports,e,e.exports,r),e.l=!0,e.exports}r.m=t,r.c=o,r.d=function(t,i,e){r.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:e})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,i){if(1&i&&(t=r(t)),8&i)return t;if(4&i&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var o in t)r.d(e,o,function(i){return t[i]}.bind(null,o));return e},r.n=function(t){var i=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(i,"a",i),i},r.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},r.p="";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],h=a.push.bind(a);a.push=i,a=a.slice();for(var l=0;l<a.length;l++)i(a[l]);var p=h;s.push([0,"chunk-vendors"]),e()})({0:function(t,i,e){t.exports=e("56d7")},"034f":function(t,i,e){"use strict";e("85ec")},"1bd7":function(t,i,e){},"424a":function(t,i,e){"use strict";e("8c4f")},"4e2d":function(t,i,e){},"56d7":function(t,i,e){"use strict";e.r(i);e("e260"),e("e6cf"),e("cca6"),e("a79d");var o=e("2b0e"),n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{attrs:{id:"app"}},[e("header",[t._v("OX25")]),e("Game"),e("footer",[t._v("Copyright (c) 2020 yamunaku")])],1)},s=[],r=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{attrs:{id:"game"}},[e("div",{style:{height:t.Config.PUZZLE_HEIGHT+"px",width:t.Config.PUZZLE_WIDTH+"px"},attrs:{id:"puzzle"},on:{pointerup:t.pieceMouseUp,pointermove:t.pieceMouseMove,pointerleave:t.pieceMouseUp}},[t._l(t.pieces,(function(i){return e("Piece",{key:i.id,style:{top:i.pos.x+"px",left:i.pos.y+"px",zIndex:i.id==t.grabbing?200:10*i.id+100},attrs:{id:"piece-"+i.id,shape:i.shape,colorId:i.id+1},nativeOn:{pointerdown:function(i){return t.pieceMouseDown(i)}}})})),e("Grid",{style:{top:t.grid_pos.x+"px",left:t.grid_pos.y+"px",zIndex:10},attrs:{light:t.light_grid}}),e("transition",{attrs:{name:"fade",mode:"out-in"}},[t.phase1?e("div",{key:"phase1",staticClass:"button",style:{top:t.grid_pos.x+150+"px",left:t.grid_pos.y+10+"px",zIndex:20},on:{click:t.lightOn}},[t._v(" 確認 ")]):e("div",{key:"phase2",staticClass:"button",style:{top:t.grid_pos.x+150+"px",left:t.grid_pos.y+10+"px",zIndex:20},on:{click:t.lightOn}},[t._v(" 判定 ")])])],2),e("Hint",{attrs:{clear:t.clear},on:{nextPhase:function(i){t.phase1=!1}}})],1)},a=[],h=(e("a9e3"),e("dca8"),Object.freeze({PUZZLE_HEIGHT:480,PUZZLE_WIDTH:640,HINT_HEIGHT:420,HINT_WIDTH:280,BLOCK_SIZE:50,BLOCK_BORDER:2,GRID_BORDER:5,VX4:[0,1,0,-1],VY4:[-1,0,1,0],VX8:[-2,-2,-1,-1,1,1,2,2],VY8:[-1,1,-2,2,-2,2,-1,1]})),l=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"piece"},t._l(t.shape,(function(i){return e("Block",{key:i.id,style:{top:i.x*t.Config.BLOCK_SIZE+"px",left:i.y*t.Config.BLOCK_SIZE+"px"},attrs:{light:i.light,colorId:t.colorId,ox:"O"}})})),1)},p=[],c=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"block",style:{height:t.Config.BLOCK_SIZE+t.Config.BLOCK_BORDER+"px",width:t.Config.BLOCK_SIZE+t.Config.BLOCK_BORDER+"px",borderWidth:t.Config.BLOCK_BORDER+"px"}},[e("div",{staticClass:"block-inside",style:{height:t.Config.BLOCK_SIZE-t.Config.BLOCK_BORDER+1+"px",width:t.Config.BLOCK_SIZE-t.Config.BLOCK_BORDER+1+"px",color:t.light?"#666666":"#a0a0a0",backgroundColor:t.light?t.colors[t.colorId][0]:t.colors[t.colorId][1],boxShadow:t.light?"inset 0 0 5px rgba(255, 255, 255, 0.8)":"inset 0 0 5px rgba(0, 0, 0, 0.4)"}},[t._v(" "+t._s(t.ox)+" ")])])},f=[],g={name:"Block",props:{ox:String,light:Boolean,colorId:Number},data:function(){return{colors:[["#d9d9d9","#757575"],["#907cd9","#4e4375"],["#71bfd9","#3d6775"],["#d9808f","#75454d"],["#d9b882","#756346"]]}},computed:{Config:function(){return h}}},u=g,d=(e("424a"),e("2877")),_=Object(d["a"])(u,c,f,!1,null,null,null),x=_.exports,O={name:"Piece",props:{shape:Array,colorId:Number},components:{Block:x},data:function(){return{}},computed:{Config:function(){return h}}},y=O,C=(e("81ff"),Object(d["a"])(y,l,p,!1,null,null,null)),m=C.exports,B=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{style:{height:5*t.Config.BLOCK_SIZE+2*t.Config.GRID_BORDER-t.Config.BLOCK_BORDER+"px",width:5*t.Config.BLOCK_SIZE+2*t.Config.GRID_BORDER-t.Config.BLOCK_BORDER+"px",borderWidth:t.Config.GRID_BORDER+"px"},attrs:{id:"grid"}},t._l(t.blocks,(function(i){return e("Block",{key:i.id,style:{top:i.x*t.Config.BLOCK_SIZE-t.Config.BLOCK_BORDER+"px",left:i.y*t.Config.BLOCK_SIZE-t.Config.BLOCK_BORDER+"px"},attrs:{light:t.light[i.x][i.y],colorId:0,ox:"X"}})})),1)},b=[],v={name:"Grid",props:{light:Array},components:{Block:x},data:function(){for(var t=[],i=0;i<5;i++)for(var e=0;e<5;e++)t.push({id:5*i+e,x:i,y:e});return{blocks:t}},computed:{Config:function(){return h}}},E=v,R=(e("9f4b"),Object(d["a"])(E,B,b,!1,null,null,null)),I=R.exports,L=function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("div",{style:{height:t.Config.HINT_HEIGHT+"px",width:t.Config.HINT_WIDTH+"px"},attrs:{id:"hint"}},[o("transition",{attrs:{name:"fade",mode:"out-in"}},[t.phase1?o("div",{key:"phase1",attrs:{id:"phase1"}},[o("div",{staticClass:"message"},[t._v("光のあるべき"),o("br"),t._v("場所を選べ")]),o("div",{style:{height:3*t.Config.BLOCK_SIZE+2*t.Config.GRID_BORDER-t.Config.BLOCK_BORDER+"px",width:3*t.Config.BLOCK_SIZE+2*t.Config.GRID_BORDER-t.Config.BLOCK_BORDER+"px",borderWidth:t.Config.GRID_BORDER+"px"},attrs:{id:"block-container"}},[o("transition",{attrs:{name:"fade"}},[t.isright?o("div",{style:{height:3*t.Config.BLOCK_SIZE-t.Config.BLOCK_BORDER+"px",width:3*t.Config.BLOCK_SIZE-t.Config.BLOCK_BORDER+"px"},attrs:{id:"result"}},[t._v(" 正解 ")]):t._e(),t.iswrong?o("div",{style:{height:3*t.Config.BLOCK_SIZE-t.Config.BLOCK_BORDER+"px",width:3*t.Config.BLOCK_SIZE-t.Config.BLOCK_BORDER+"px"},attrs:{id:"result"}},[t._v(" 不正解 ")]):t._e()]),t._l(t.blocks,(function(i){return o("Block",{key:i.id,staticClass:"clickable",style:{top:i.x*t.Config.BLOCK_SIZE-t.Config.BLOCK_BORDER+"px",left:i.y*t.Config.BLOCK_SIZE-t.Config.BLOCK_BORDER+"px"},attrs:{id:"block-"+i.id,light:i.light,colorId:0,ox:i.ox},nativeOn:{click:function(i){return t.toggle(i)}}})}))],2),o("div",{staticClass:"button",on:{click:t.check}},[t._v("判定")])]):t.clear?o("div",{key:"phaseclear",attrs:{id:"clear"}},[o("div",{staticClass:"message"},[o("span",{staticStyle:{"font-family":"'Quicksand', sans-serif","letter-spacing":"2px","font-size":"40px"}},[t._v("OX25")]),t._v(" の謎を"),o("br"),t._v("解き明かした！ ")]),o("div",{staticClass:"tweet"},[o("a",{staticClass:"twitter-share-button",attrs:{href:"https://twitter.com/intent/tweet?text=OX25 の謎を解き明かした！&hashtags=OX25謎&url=https://yamunaku.github.io/ox25/"}},[t._v("twitter でシェア")])])]):o("div",{key:"phase2",attrs:{id:"phase2"}},[o("div",{staticClass:"message"},[t._v("すべて配置し"),o("br"),t._v("光で満たせ")]),o("img",{staticClass:"image",attrs:{src:e("c079")}})])])],1)},D=[],K={name:"Hint",components:{Block:x},props:{clear:Boolean},data:function(){return{iswrong:!1,isright:!1,phase1:!0,blocks:[{id:0,x:0,y:0,light:!1,ox:"O"},{id:1,x:0,y:1,light:!1,ox:"X"},{id:2,x:0,y:2,light:!1,ox:"O"},{id:3,x:1,y:0,light:!1,ox:"O"},{id:4,x:1,y:2,light:!1,ox:"X"},{id:5,x:2,y:0,light:!1,ox:"X"},{id:6,x:2,y:1,light:!1,ox:"X"},{id:7,x:2,y:2,light:!1,ox:"O"}],ans:[!0,!1,!0,!1,!1,!1,!0,!0]}},methods:{toggle:function(t){var i=Number(t.target.id[6]);this.blocks[i].light=!this.blocks[i].light},deleteWrong:function(){this.iswrong=!1},deleteRight:function(){this.isright=!1,this.phase1=!1,this.$emit("nextPhase")},check:function(){for(var t=!0,i=0;i<8;i++)this.blocks[i].light!=this.ans[i]&&(t=!1);t?(this.isright=!0,setTimeout(this.deleteRight,500)):(this.iswrong=!0,setTimeout(this.deleteWrong,500))}},computed:{Config:function(){return h}}},Z=K,k=(e("ee65"),Object(d["a"])(Z,L,D,!1,null,null,null)),S=k.exports,w={name:"Game",components:{Piece:m,Grid:I,Hint:S},data:function(){for(var t=[{x:240,y:70},{x:330,y:170},{x:70,y:70},{x:330,y:340}],i=[],e=0;e<5;e++){for(var o=[],n=0;n<5;n++)o.push(-1);i.push(o)}var s=[];for(e=0;e<5;e++){for(o=[],n=0;n<5;n++)o.push(!1);s.push(o)}return{phase1:!0,clear:!1,grid_pos:{x:50,y:(h.PUZZLE_WIDTH-5*h.BLOCK_SIZE)/2},place:i,light_grid:s,pieces:[{id:0,init_pos:t[0],pos:Object.assign({},t[0]),shape:[{id:0,x:0,y:0,light:!1},{id:1,x:1,y:0,light:!1},{id:2,x:1,y:1,light:!1},{id:3,x:2,y:0,light:!1}],max_shape:{x:2,y:1}},{id:1,init_pos:t[1],pos:Object.assign({},t[1]),shape:[{id:0,x:0,y:2,light:!1},{id:1,x:1,y:0,light:!1},{id:2,x:1,y:1,light:!1},{id:3,x:1,y:2,light:!1}],max_shape:{x:1,y:2}},{id:2,init_pos:t[2],pos:Object.assign({},t[2]),shape:[{id:0,x:0,y:1,light:!1},{id:1,x:1,y:0,light:!1},{id:2,x:1,y:1,light:!1},{id:3,x:2,y:0,light:!1}],max_shape:{x:2,y:1}},{id:3,init_pos:t[3],pos:Object.assign({},t[3]),shape:[{id:0,x:0,y:1,light:!1},{id:1,x:0,y:2,light:!1},{id:2,x:1,y:0,light:!1},{id:3,x:1,y:1,light:!1}],max_shape:{x:1,y:2}}],lighting:!1,grabbing:-1,from_mouse:{x:0,y:0},from_piece:{x:0,y:0}}},methods:{lightOn:function(){if(!this.clear){this.lighting=!0;for(var t=[],i=0,e=0;e<5;e++){for(var o=[],n=0;n<5;n++){for(var s=!1,r=0;r<8;r++){var a=e+h.VX8[r],l=n+h.VY8[r];a<0||5<=a||l<0||5<=l||-1==this.place[a][l]&&(s=!0)}-1==this.place[e][n]^s?(o.push(!0),i++):o.push(!1)}t.push(o)}var p=[5,5,5,5],c=[5,5,5,5];for(e=0;e<5;e++)for(n=0;n<5;n++)-1!=this.place[e][n]&&(p[this.place[e][n]]=Math.min(p[this.place[e][n]],e),c[this.place[e][n]]=Math.min(c[this.place[e][n]],n));for(e=0;e<4;e++){var f=this.pieces[e];if(5!=p[e])for(n=0;n<4;n++)f.shape[n].light=t[p[e]+f.shape[n].x][c[e]+f.shape[n].y],t[p[e]+f.shape[n].x][c[e]+f.shape[n].y]=!1;else for(n=0;n<4;n++)f.shape[n].light=!1}this.light_grid=t,this.phase1||25!=i||(this.clear=!0)}},lightOff:function(){if(!this.clear){this.lighting=!1;for(var t=[],i=0;i<5;i++){for(var e=[],o=0;o<5;o++)e.push(!1);t.push(e)}for(this.light_grid=t,i=0;i<4;i++)for(o=0;o<4;o++)this.pieces[i].shape[o].light=!1}},pieceMouseDown:function(t){if(!this.clear){this.grabbing=Number(t.target.parentNode.id[6]),this.from_mouse.x=t.y,this.from_mouse.y=t.x,this.from_piece.x=this.pieces[this.grabbing].pos.x,this.from_piece.y=this.pieces[this.grabbing].pos.y;for(var i=0;i<5;i++)for(var e=0;e<5;e++)this.place[i][e]==this.grabbing&&(this.place[i][e]=-1);this.lighting&&this.lightOff()}},pieceMouseUp:function(t){if(!this.clear&&-1!=this.grabbing){var i=this.grabbing;this.grabbing=-1;var e=this.pieces[i],o=Math.max(0,Math.min(h.PUZZLE_HEIGHT-(e.max_shape.x+1)*h.BLOCK_SIZE,t.y-this.from_mouse.x+this.from_piece.x)),n=Math.max(0,Math.min(h.PUZZLE_WIDTH-(e.max_shape.y+1)*h.BLOCK_SIZE,t.x-this.from_mouse.y+this.from_piece.y)),s=Math.round((o-(this.grid_pos.x+h.GRID_BORDER-h.BLOCK_BORDER))/h.BLOCK_SIZE),r=Math.round((n-(this.grid_pos.y+h.GRID_BORDER-h.BLOCK_BORDER))/h.BLOCK_SIZE);if(s<0||5-e.max_shape.x<=s||r<0||5-e.max_shape.y<=r)return e.pos.x=e.init_pos.x,void(e.pos.y=e.init_pos.y);for(var a=!0,l=0;l<4;l++)-1!=this.place[s+e.shape[l].x][r+e.shape[l].y]&&(a=!1);if(!a)return e.pos.x=e.init_pos.x,void(e.pos.y=e.init_pos.y);for(l=0;l<4;l++)this.place[s+e.shape[l].x][r+e.shape[l].y]=i;e.pos.x=s*h.BLOCK_SIZE+(this.grid_pos.x+h.GRID_BORDER-h.BLOCK_BORDER),e.pos.y=r*h.BLOCK_SIZE+(this.grid_pos.y+h.GRID_BORDER-h.BLOCK_BORDER)}},pieceMouseMove:function(t){if(!this.clear&&-1!=this.grabbing){var i=this.pieces[this.grabbing];i.pos.x=Math.max(0,Math.min(h.PUZZLE_HEIGHT-(i.max_shape.x+1)*h.BLOCK_SIZE,t.y-this.from_mouse.x+this.from_piece.x)),i.pos.y=Math.max(0,Math.min(h.PUZZLE_WIDTH-(i.max_shape.y+1)*h.BLOCK_SIZE,t.x-this.from_mouse.y+this.from_piece.y))}}},computed:{Config:function(){return h}}},H=w,M=(e("68e4"),Object(d["a"])(H,r,a,!1,null,null,null)),G=M.exports,T={name:"App",components:{Game:G}},P=T,j=(e("034f"),Object(d["a"])(P,n,s,!1,null,null,null)),U=j.exports;o["a"].config.productionTip=!1,new o["a"]({render:function(t){return t(U)}}).$mount("#app")},"68e4":function(t,i,e){"use strict";e("4e2d")},"81ff":function(t,i,e){"use strict";e("f1c9")},"85ec":function(t,i,e){},"8c4f":function(t,i,e){},"9f4b":function(t,i,e){"use strict";e("c48a")},c079:function(t,i,e){t.exports=e.p+"img/paper.40fb432e.png"},c48a:function(t,i,e){},ee65:function(t,i,e){"use strict";e("1bd7")},f1c9:function(t,i,e){}});
//# sourceMappingURL=app.6b5848e7.js.map